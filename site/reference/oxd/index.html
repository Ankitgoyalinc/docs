<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon_ic.ico">

        <title>OxD - Gluu Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../.."><img src="../../img/logo.png" ></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    
                        <li >
                            <a href="../..">Home</a>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin Guide <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
                                    <li >
                                        <a href="../../admin-guide/introduction/">Introduction</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/deployment/">Deployment</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/configuration/">Configuration</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/design-customizations/">Design and Customizations</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/ldap/">LDAP</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/saml/">SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/openid-connect/">OpenID Connect</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/uma/">UMA</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/user-management/">User Management</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/personal/">Personal</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/faq/">FAQ</a>
                                    </li>
                                
                            
                            </ul>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown active">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
                                    <li >
                                        <a href="../api/">API</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../interception-scripts/">Interception Scripts</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../ldap-namespace/">LDAP Namespace</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../ldap-schema/">LDAP Schema</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../lib/">Gluu Library</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../oxAuth/">oxAuth</a>
                                    </li>
                                
                            
                                
                                    <li class="active">
                                        <a href="./">OxD</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../oxTrust/">oxTrust</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/certificates/">Certificates</a>
                                    </li>
                                
                            
                            </ul>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Articles <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
                                    <li >
                                        <a href="../../articles/apache-saml/">Apache-SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/benchmarking/">Benchmarking</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/custom-attributes/">Custom Attributes</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/google-saml/">Google SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/iis-saml/">IIS SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/java-connect/">Java Connect</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/java-saml/">Java SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/js-connect/">JS Connect</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/scim-client/">SCIM Client</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/test-shib2/">Test Shib2</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/gluu-server-ce/">Gluu Server CE</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../admin-guide/operations/">Gluu Server Operations</a>
                                    </li>
                                
                            
                            </ul>
                        </li>
                    
                
                
                
                
                </ul>
            

            
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../oxAuth/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../oxTrust/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                
                <li>
                    <a href="https://github.com/GluuFederation/docs">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                <li>
                <!--<form action="." method="get" class="form-inline">-->
                    <!--<div class="search-box">-->
                        <!--<input type="text" value="" class="search-text" placeholder="Search" />-->
                        <!--<input type="submit" value="Search" class="search-tag"/>-->
                    <!--</div>-->
                <!--</form>-->

                </li>
                
            </ul>
            
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3">
                <div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
       
        <li class="main active"><a href="#oxd-communication-protocol">oxD Communication Protocol</a></li>
        
            <li><a href="#command-response-status">Command Response Status</a></li>
        
            <li><a href="#command-types">Command Types</a></li>
        
       
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="oxd-communication-protocol">oxD Communication Protocol</h1>
<p><strong>state:</strong> in progress (not finished yet)</p>
<p>Communication is made in JSON format as request-response model. Since there is no HTTP involved command types, statuses are built-in in format itself as:</p>
<pre class="prettyprint well"><code>Request:
{
    "command":"`&lt;command type&gt;`",
    "params": {
        `&lt;parameters of command&gt;`
    }
}

Response:
{
    "status":"`&lt;status of command: ok or error&gt;`",
    "data":{
        `&lt;response data&gt;`
    }
}
</code></pre>
<p>oxD must provide:
 1.  simultaneous requests handling for multiple plugins (one oxD for multiple apache plugins);
 2.  one apache plugin can send multiple commands sequentially without input steam closing (resource reusing - better performance)</p>
<p>Streams are considered as characters streams (according to <a href="http://docs.oracle.com/javase/6/docs/api/java/io/Reader.html">Reader</a>). To distinguish different commands sent from the same plugin (within the same session) length prefix is used. First 4 characters are always length of command that follows directly after it. (Example: 0154 - command consists of 154 characters). </p>
<h2 id="command-response-status">Command Response Status</h2>
<p>Possible statuses are: ok, error.
If error returned then "data" part contains error description.</p>
<p><strong>Example of error response</strong></p>
<pre class="prettyprint well"><code>{
    "status":"error",
    "data":{
        "error":"`&lt;error code, e.g. authorization_server_not_found,&gt;`"
        "error_description":`&lt;error description as human-readable text&gt;`
    }
}
</code></pre>
<h2 id="command-types">Command Types</h2>
<p>Command types:
 1.  <a href="#Register%20client">Register client</a> - register_client
 2.  <a href="#Client%20read">Client read</a> - client_read
 3.  <a href="#Obtain%20PAT">Obtain PAT</a> - obtain_pat
 4.  <a href="#Register%20resource">Register resource</a> - register_resource
 5.  <a href="#Check%20status%20of%20RPT">Check status of RPT</a> - rpt_status
 6.  <a href="#Check%20status%20of%20ID%20Token">Check status of ID Token</a> - id_token_status
 7.  <a href="#Check%20status%20of%20Access%20Token">Check status of Access Token</a> - access_token_status
 8.  <a href="#Register%20permission%20ticket">Register permission ticket</a> - register_ticket
 9.  <a href="#Discovery">Discovery</a> - discovery</p>
<h3 id="register-client">Register client</h3>
<p>Client registered by oxd has fallback values for following parameters if they are not provided in request :</p>
<ul>
<li>
<p>application_type: web;</p>
</li>
<li>
<p>response_types: code, id_token, token</p>
</li>
</ul>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"register_client",
    "params": {
        "discovery_url":"`&lt;discovery url&gt;`",
        "redirect_url":"`&lt;redirect url&gt;`",
        "logout_redirect_url":"`&lt;logout redirect url&gt;`",
        "client_name":"`&lt;client name&gt;`",
        "response_types":"`&lt;response types&gt;`",
        "app_type":"`&lt;application type&gt;`",
        "grant_types":"`&lt;grant types&gt;`",
        "contacts":"`&lt;contacts&gt;`",
        "jwks_uri":"`&lt;jwks uri&gt;`"        
    }
}

Response:
{
    "status":"`&lt;command status&gt;`",
    "data":{
        "client_id":"`&lt;client id&gt;`",
        "client_secret":"`&lt;client secret&gt;`",
        "registration_access_token":"`&lt;registration access token&gt;`",
        "client_secret_expires_at": "`&lt;client secret expiration time&gt;`",
        "registration_client_uri":"`&lt;registration client uri&gt;`",
        "client_id_issued_at":"`&lt;client id issued at&gt;`"        
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample request:
{
    "command":"register_client",
    "params": {
        "discovery_url":"https://seed.gluu.org/.well-known/openid-configuration",
        "redirect_url":"https://rs.gluu.org/resources",
        "client_name":"oxD Client",
        "response_types":"code id_token token",
        "app_type":"web",
        "grant_types":"authorization_code implicit",
        "contacts":"mike@gluu.org yuriy@gluu.org",
        "jwks_uri":"https://seed.gluu.org/jwks"   
    }
}

Sample response:

{
    "status":"ok",
    "data":{
        "client_id":"@!1111!0008!0001",
        "client_secret":"ZJYCqe3GGRvdrudKyZS0XhGv_Z45DuKhCUk0gBR1vZk",
        "registration_access_token":"this.is.an.access.token.value.ffx83",
        "client_secret_expires_at": 1577858400,
        "registration_client_uri":"https://seed.gluu.org/oxauth/rest1/register?client_id=23523534",
        "client_id_issued_at": 1577858300      
    }
}
</code></pre>
<h3 id="client-read">Client read</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"client_read",
    "params": {
        "registration_client_uri":"`&lt;registration client uri&gt;`",
        "registration_access_token":"`&lt;registration access token&gt;`"        
    }
}

Response:
{
    "status":"`&lt;command status&gt;`",
    "data":{
        "client_id":"`&lt;client id&gt;`",
        "client_secret":"`&lt;client secret&gt;`",
        "registration_access_token":"`&lt;registration access token&gt;`",
        "client_secret_expires_at": "`&lt;client secret expiration time&gt;`",
        "registration_client_uri":"`&lt;registration client uri&gt;`",
        "client_id_issued_at":"`&lt;client id issued at&gt;`"        
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample request:
{
    "command":"client_read",
    "params": {
        "registration_client_uri":"https://seed.gluu.org/oxauth/rest1/register?client_id=23523534",
        "registration_access_token":"this.is.an.access.token.value.ffx83"    
    }
}

Sample response:

{
    "status":"ok",
    "data":{
        "client_id":"@!1111!0008!0001",
        "client_secret":"ZJYCqe3GGRvdrudKyZS0XhGv_Z45DuKhCUk0gBR1vZk",
        "registration_access_token":"this.is.an.access.token.value.ffx83",
        "client_secret_expires_at": 1577858400,
        "registration_client_uri":"https://seed.gluu.org/oxauth/rest1/register?client_id=23523534",
        "client_id_issued_at": 1577858300      
    }
}
</code></pre>
<h3 id="obtain-pat">Obtain PAT</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"obtain_pat",
    "params": {
        "discovery_url":"`&lt;discovery url&gt;`",
        "uma_discovery_url":"`&lt;uma discovery url&gt;`",
        "redirect_url":"`&lt;redirect url&gt;`",
        "client_id":"`&lt;client id e.g. @!1111!0008!0001&gt;`",
        "client_secret":"`&lt;client secret&gt;`",    
        "user_id":"`&lt;user id&gt;`",
        "user_secret":"`&lt;user secret&gt;`";    
    }
}

Response:
{
    "status":"ok",
    "data": {
        "pat_token":"`&lt;pat token&gt;`",
        "expires_in_seconds":"`&lt;expires in seconds&gt;`",
        "pat_refresh_token":"`&lt;pat refresh token&gt;`",
        "authorization_code:"`&lt;authorization code&gt;`",
        "scope":"`&lt;scope&gt;`"
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample Request:
{
    "command":"obtain_pat",
    "params": {
        "discovery_url":"https://seed.gluu.org/.well-known/openid-configuration",
        "uma_discovery_url":"http://seed.gluu.org/.well-known/uma-configuration",
        "redirect_url":"https://rs.gluu.org/resources",
        "client_id":"@!1111!0008!0068.3E20",
        "client_secret":"32c2fb17-409d-48a2-b793-a639c8ac6cb2",    
        "user_id":"yuriy",
        "user_secret":"secret";    
    }
}

Sample Response:
{
    "status":"ok",
    "data": {
        "pat_token":"eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vc2VlZC5nbHV1L",
        "expires_in_seconds":3599,
        "pat_refresh_token":"UzI1NiIsImprdSI6Imh0dHBzOi8vc2VlZC5nbHV",
        "authorization_code:"1e436c1a-6e96-4d98-81d6-8f4019ab4636",
        "scope":"http://docs.kantarainitiative.org/uma/scopes/prot.json"
    }
}
</code></pre>
<h3 id="obtain-aat">Obtain AAT</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"obtain_aat",
    "params": {
        "discovery_url":"`&lt;discovery url&gt;`",
        "uma_discovery_url":"`&lt;uma discovery url&gt;`",
        "redirect_url":"`&lt;redirect url&gt;`",
        "client_id":"`&lt;client id e.g. @!1111!0008!0001&gt;`",
        "client_secret":"`&lt;client secret&gt;`",    
        "user_id":"`&lt;user id&gt;`",
        "user_secret":"`&lt;user secret&gt;`";    
    }
}

Response:
{
    "status":"ok",
    "data": {
        "aat_token":"`&lt;aat token&gt;`",
        "expires_in_seconds":"`&lt;expires in seconds&gt;`",
        "aat_refresh_token":"`&lt;aat refresh token&gt;`",
        "authorization_code:"`&lt;authorization code&gt;`",
        "scope":"`&lt;scope&gt;`"
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample Request:
{
    "command":"obtain_aat",
    "params": {
        "discovery_url":"https://seed.gluu.org/.well-known/openid-configuration",
        "uma_discovery_url":"http://seed.gluu.org/.well-known/uma-configuration",
        "redirect_url":"https://rs.gluu.org/resources",
        "client_id":"@!1111!0008!0068.3E20",
        "client_secret":"32c2fb17-409d-48a2-b793-a639c8ac6cb2",    
        "user_id":"yuriy",
        "user_secret":"secret";    
    }
}

Sample Response:
{
    "status":"ok",
    "data": {
        "aat_token":"eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vc2VlZC5nbHV1L",
        "expires_in_seconds":3599,
        "aat_refresh_token":"UzI1NiIsImprdSI6Imh0dHBzOi8vc2VlZC5nbHV",
        "authorization_code:"1e436c1a-6e96-4d98-81d6-8f4019ab4636",
        "scope":"http://docs.kantarainitiative.org/uma/scopes/prot.json"
    }
}
</code></pre>
<h3 id="obtain-rpt">Obtain RPT</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"obtain_rpt",
    "params": {
        "aat_token":"`&lt;AAT token&gt;`",
        "am_host":"`&lt;AS host&gt;`"
    }
}

Response:
{
    "status":"ok",
    "data": {
        "rpt_token":"`&lt;rpt token&gt;`"
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample Request:
{
    "command":"obtain_rpt",
    "params": {
        "aat_token":"eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vc2VlZC5nbHV1L",
        "am_host":"seed.gluu.org"  
    }
}

Sample Response:
{
    "status":"ok",
    "data": {
        "rpt_token":"32c2fb17-409d-48a2-b793-a639c8ac6cb2"
    }
}
</code></pre>
<h3 id="authorize-rpt">Authorize RPT</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"authorize_rpt",
    "params": {
        "aat_token":"`&lt;AAT token&gt;`",
        "rpt_token":"`&lt;RPT token&gt;`"
        "am_host":"`&lt;AS host&gt;`",
        "ticket":"`&lt;permission ticket&gt;`",
        "claims":{`&lt;user claims&gt;`}
    }
}

OK Response (authorized):
{
    "status":"ok",
    "data":null
}

Error Response (not authorized):
{
    "status":"error",
    "data":{
        "error":"`&lt;error code, e.g. not_allowed,&gt;`"
        "error_description":`&lt;not allowed to authorize rpt&gt;`
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample Request:
{
    "command":"authorize_rpt",
    "params": {
        "aat_token":"eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vc2VlZC5nbHV1L",
        "rpt_token":"fb17-409d-48a2-b793-a639c"
        "am_host":"seed.gluu.org",
        "ticket":"48a2-b793-a639c8ac6cb2",
        "claims":{"uid":["user1"],"email":["user1@gluu.org","user1@gmail.com"]}
    }
}

Sample Response:
{
    "status":"ok",
    "data":null
}
</code></pre>
<h3 id="register-resource">Register resource</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"register_resource",
    "params": {
        "uma_discovery_url":"`&lt;uma discovery url&gt;`",
        "pat":"`&lt;pat token&gt;`",
        "name": "`&lt;name&gt;`",
        "scopes": [
            `&lt;array of scopes for this resource&gt;`
        ]
    }   
}

Response:
{
    "status":"`&lt;status of command&gt;`",
    "data":{
        "_id": "`&lt;id of created resource set&gt;`",
        "_rev": "&lt;ETag of created resource set"
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample Request:
{
    "command":"register_resource",
    "params": {
        "uma_discovery_url":"https://seed.gluu.org/.well-known/uma-configuration",
        "pat":"eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vc2VlZC5nbHV1L",
        "name": "My Resource",
        "scopes": [
            "http://photoz.example.com/dev/scopes/view",
            "http://photoz.example.com/dev/scopes/all"
        ]
    }   
}

Sample Response:
{
    "status":"ok",
    "data":{
        "status": "created",
        "_id": "1366810445313",
        "_rev": "1"
    }
}
</code></pre>
<h3 id="check-status-of-rpt">Check status of RPT</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"rpt_status",
    "params": {
        "uma_discovery_url":"`&lt;uma discovery url&gt;`"
        "pat": "`&lt;pat&gt;`",
        "rpt": "`&lt;rpt&gt;`"
    }   
}

Response:
{
    "status":"ok",
    "data":{
        "active": "`&lt;whether rpt is active (true|false)&gt;`",
        "expires_at": `&lt;rpt expires at (date)&gt;`,
        "issued_at": `&lt;rpt issued at (date)&gt;`,
        "permissions":[
            `&lt;permissions of rpt&gt;`
        ]
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample request:
{
    "command":"rpt_status",
    "params": {
        "uma_discovery_url":"https://seed.gluu.org/.well-known/uma-configuration",
        "pat": "eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0",
        "rpt": "KV1MiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vc2VlZC5nbHV1Lm9yZy9veGF1dGgvc2VhbS9yZXNvdXJjZS9yZXN0djEvb3hhd"
    }   
}

Sample response:

{
    "status":"ok",
    "data":{
        "active": true,
        "expires_at": 1256928856,
        "issued_at": 1256923456,
        "permissions":[
            {
                 "resource_set_id": "112210f47de98100",
                 "scopes": [
                     "http://photoz.example.com/dev/actions/view",
                     "http://photoz.example.com/dev/actions/all"
                 ],
                 "expires_at" : "1256923456"
            }
        ]
    }
}
</code></pre>
<h3 id="check-status-of-id-token">Check status of ID Token</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"id_token_status",
    "params": {
        "discovery_url":"`&lt;discovery url&gt;`",
        "id_token": "`&lt;id_token&gt;`"
    }   
}

Response:
{
    "status":"ok",
    "data":{
        "active": "`&lt;whether id token is active (true|false)&gt;`",
        "expires_at": `&lt;id token expires at (date)&gt;`,
        "issued_at": `&lt;id token issued at (date)&gt;`,
        "claims": {
            `&lt;claim name&gt;`:[`&lt;claim values&gt;`]
        }
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample request:
{
    "command":"id_token_status",
    "params": {
        "discovery_url":"https://seed.gluu.org/.well-known/openid-configuration",
        "id_token": "eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0"
    }   
}

Sample response:

{
    "status":"ok",
    "data":{
        "active": true,
        "expires_at": 1256928856,
        "issued_at": 1256923456,
        "claims": {
            "oxValidationURI": [
                "https://seed.gluu.org/oxauth/opiframe.seam"
             ],
            "exp": [
                "1383836968"
            ],
            "sub": [
                "mike"
            ],
            "at_hash": [
                "fMdvIEy7RjdFy4Q-mGXOWw"
            ],
            "aud": [
                "@!1111!0008!FF81!2D39"
            ],
            "iss": [
                "https://seed.gluu.org"
            ],
            "oxOpenIDConnectVersion": [
                "openidconnect-1.0"
            ],
            "iat": [
                "1383833368"
            ],
            "oxInum": [
                "@!1111!0000!D4E7"
            ]
        }
    }
}
</code></pre>
<h3 id="check-status-of-access-token">Check status of Access Token</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"access_token_status",
    "params": {
        "discovery_url":"`&lt;discovery url&gt;`",
        "id_token": "`&lt;id_token&gt;`"
        "access_token": "`&lt;access_token&gt;`"
    }   
}

Response:
{
    "status":"ok",
    "data":{
        "active": "`&lt;whether access token is active (true|false)&gt;`",
        "expires_at": `&lt;access token expires at (date)&gt;`,
        "issued_at": `&lt;access token issued at (date)&gt;`
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample request:
{
    "command":"access_token_status",
    "params": {     
        "discovery_url":"https://seed.gluu.org/.well-known/openid-configuration",   
        "id_token":"NiIsImprdSI6Imh0dHBzOi8vc2VlZC5nbHV1Lm9yZy9veGF1dGgvc2VhbS9yZXNvdXJjZS9yZ"
        "access_token": "KV1MiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0dHBzOi8vc2VlZC5nbHV1Lm9yZy9veGF1dGgvc2VhbS9yZXNvdXJjZS9yZXN0djEvb3hhd"
    }   
}

Sample response:

{
    "status":"ok",
    "data":{
        "active": true,
        "expires_at": 1256928856,
        "issued_at": 1256923456
    }
}
</code></pre>
<h3 id="register-permission-ticket">Register permission ticket</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"register_ticket",
    "params": {
        "uma_discovery_url":"`&lt;uma discovery url&gt;`",
        "pat": "`&lt;pat&gt;`",
        "am_host": "`&lt;Authorization Server host e.g. seed.gluu.org&gt;`"
        "rs_host": "`&lt;Resource Server host&gt;`",
        "resource_set_id":"`&lt;resource set id&gt;`",
        "scopes": [
            `&lt;scopes uris required by this permission&gt;`
        ],
        "request_http_method":"`&lt;http method&gt;`",
        "request_url":"`&lt;request url&gt;`"
    }   
}

Response:
{
    "status":"`&lt;status&gt;`",
    "data":{
        "ticket": "`&lt;ticket&gt;`",
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Sample request:
{
    "command":"register_ticket",
    "params": {
        "uma_discovery_url":"https://seed.gluu.org/.well-known/uma-configuration",
        "pat": "eyJ0eXAiOiJKV1MiLCJhbGciOiJSUzI1NiIsImprdSI6Imh0",
        "am_host": "seed.gluu.org"
        "rs_host": "rs.gluu.org",
        "resource_set_id":"1366810445313",
        "scopes": [
            "http://photoz.example.com/dev/scopes/view",
            "http://photoz.example.com/dev/scopes/add"
        ],
        "request_http_method":"DELETE",
        "request_url":"http://example.com/object/1234"

    }   
}

Sample response:
{
    "status":"ok",
    "data":{
        "ticket": "mcvmstkrkrdfskdjdasldf",
    }
}
</code></pre>
<h3 id="discovery">Discovery</h3>
<p><strong>Pattern</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"discovery",
    "params": {
        "discovery_url":"`&lt;discovery url&gt;`"
    }
}

Response:
{
    "status":"`&lt;command status&gt;`",
    "data":{
        `&lt;discovery data&gt;`
    }
}
</code></pre>
<p><strong>Sample</strong></p>
<pre class="prettyprint well"><code>Request:
{
    "command":"discovery",
    "params": {
        "discovery_url":"https://seed.gluu.org/.well-known/openid-configuration"
    }
}

Response:
{
    "data": {
        "issuer": "https://seed.gluu.org",
        "authorization_endpoint": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/authorize",
        "token_endpoint": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/token",
        "userinfo_endpoint": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/userinfo",
        "clientinfo_endpoint": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/clientinfo",
        "check_session_iframe": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/check_session",
        "end_session_endpoint": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/end_session",
        "jwks_uri": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/jwks",
        "registration_endpoint": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/register",
        "validate_token_endpoint": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/validate",
        "federation_metadata_endpoint": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/federationmetadata",
        "federation_endpoint": "https://seed.gluu.org/oxauth/seam/resource/restv1/oxauth/federation",
        "id_generation_endpoint": "https://seed.gluu.org/oxauth/seam/resource/restv1/id",
        "scopes_supported": [
            "openid",
            "address",
            "clientinfo",
            "http://docs.kantarainitiative.org/uma/scopes/prot.json",
            "profile",
            "phone",
            "http://docs.kantarainitiative.org/uma/scopes/authz.json",
            "email"
        ],
        "response_types_supported": [
            "code",
            "code id_token",
            "token",
            "token id_token",
            "code token",
            "code token id_token",
            "id_token"
        ],
        "grant_types_supported": [
            "authorization_code",
            "implicit",
            "urn:ietf:params:oauth:grant-type:jwt-bearer"
        ],
        "subject_types_supported": [
            "public",
            "pairwise"
        ],
        ....`&lt;SAVE SPACE: remove part of discovery response, see docs to take a look to full response&gt;`................
        "service_documentation": "http://ox.gluu.org/doku.php?id=oxauth:home",
        "claims_locales_supported": ["en-US"],
            "ui_locales_supported": ["en-US"],
        "claims_parameter_supported": true,
        "request_parameter_supported": true,
        "request_uri_parameter_supported": true,
        "require_request_uri_registration": false,
        "op_policy_uri": "http://ox.gluu.org/doku.php?id=oxauth:policy",
        "op_tos_uri": "http://ox.gluu.org/doku.php?id=oxauth:tos"
    }

}
</code></pre>
</div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Copyright &copy; 2014, Gluu, Inc.</p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/base.js"></script>
        
    </body>
</html>