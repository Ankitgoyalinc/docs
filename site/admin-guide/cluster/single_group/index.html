<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../..//img/favicon_ic.ico">

        <title>Cluster - Gluu Servers</title>

        <link href="../../..//css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../..//css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../..//css/prettify-1.0.css" rel="stylesheet">
        <link href="../../..//css/base.css" rel="stylesheet">
        

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../../../"><img src="../../..//img/logo.png" ></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    
                        <li >
                            <a href="../../../">Home</a>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin Guide <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
                                    <li >
                                        <a href="../../introduction/">Introduction</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../installation/">Installation</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../custom-look/">Customizing Look and Feel</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../certificates/">Certificates</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../user-management/">User Management</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../authentication/">Authentication</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../saml/">SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../openid-connect/">OpenID Connect</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../uma/">UMA</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../interception-scripts/">Interception Scripts</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../oxPush/">oxPush</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../">Cluster Sulution</a>
                                    </li>
                                
                            
                            </ul>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
                                    <li >
                                        <a href="../../../reference/configuration/">Configuration</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../reference/oxTrust/">oxTrust User Interface</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../reference/ldap/">LDAP Schema</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../reference/lib/">Libraries</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../reference/api/">APIs</a>
                                    </li>
                                
                            
                            </ul>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Articles <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
                                    <li >
                                        <a href="../../../articles/gluu-server-ce/">Try Gluu Server CE - Quickstart</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../articles/apache-saml/">Apache SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../articles/java-saml/">Java SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../articles/google-saml/">Google SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../articles/apache-oauth2/">Apache OpenID Connect / UMA</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../articles/js-connect/">JavaScript OpenID Connect RP</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../articles/java-connect/">Java OpenID Connect RP</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../articles/scim-client/">Java SCIM client</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../../articles/benchmarking/">Gluu Server Benchmark</a>
                                    </li>
                                
                            
                            </ul>
                        </li>
                    
                
                
                
                
                </ul>
            

            
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../../oxPush/oxPush-crypto/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../multi_group/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                
                <li>
                    <a href="https://github.com/GluuFederation/docs">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                <li>
                <!--<form action="." method="get" class="form-inline">-->
                    <!--<div class="search-box">-->
                        <!--<input type="text" value="" class="search-text" placeholder="Search" />-->
                        <!--<input type="submit" value="Search" class="search-tag"/>-->
                    <!--</div>-->
                <!--</form>-->

                </li>
                
            </ul>
            
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3">
                <div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
       
        <li class="main active"><a href="#single-group">Single Group</a></li>
        
            <li><a href="#advices">Advices</a></li>
        
            <li><a href="#technologes">Technologes</a></li>
        
            <li><a href="#loda-balancer">Loda Balancer</a></li>
        
            <li><a href="#mod_jk">Mod_jk</a></li>
        
            <li><a href="#opendj">OpenDJ</a></li>
        
            <li><a href="#memcached">Memcached</a></li>
        
            <li><a href="#twemproxy">Twemproxy</a></li>
        
            <li><a href="#glusterfs">GlusterFS</a></li>
        
            <li><a href="#health-check-script">Health Check Script</a></li>
        
       
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h2 id="single-group">Single Group</h2>
<p>Logical network diagram of “SingleGroup” is presented in <a href="../../../img/cluster/cluster.png">Figure 1</a></p>
<h3 id="advices">Advices</h3>
<ul>
<li>
<p>Inside “SINGLE GROUP” the quantity of active nodes with all in one installation can
be no more than 5 nodes. If there will be necessity to increase quantity of nodes,
then must be used “MULTI GROUP” approaching.</p>
</li>
<li>
<p>“SINGLE GROUP” approaching is better to use inside of one data center or it can be
used in different datacenters where quality and HA of network inter connection is
high.</p>
</li>
<li>
<p>For easy and fast installation of IDP environment in every node, inside of cluster
can be used single Linux distribution package.</p>
</li>
</ul>
<p><img alt="Image" src="../../../img/cluster/cluster.png" />
Figure 1</p>
<h3 id="technologes">Technologes</h3>
<p>The following Technologies must be used to achieve “SINGLE GROUP” clustering
solutions.</p>
<h3 id="loda-balancer">Loda Balancer</h3>
<ul>
<li>Distributing workloads across multiple Nodes direct to apache servers in top
of cluster can be used any hardware load balancer. The HA of load balancers
are not described in current document.</li>
</ul>
<h3 id="mod_jk">Mod_jk</h3>
<ul>
<li>For distributing workloads from apache server between Tomcat servers must
be used mod_jk connector with load balancing mechanism.</li>
</ul>
<h3 id="opendj">OpenDJ</h3>
<ul>
<li>For OpenDJ - LDAP replication must be used multimaster synchronization
mechanism. The replication topology and suggestions have been taken from
official site of Opendj. LDAP Replication Topology for “SINGLE GROUP” is
presented in <a href="../../../img/cluster/ldup.png">Figure 2</a>.</li>
</ul>
<p><img alt="Image" src="../../../img/cluster/ldap.png" />
Figure 2</p>
<p>In case of using more than 5 nodes, must be used “MULTI GROUP” solution where will be
used stand alone replication servers. As total number of replication connections will impact
the scalability of cluster solution.
According Equation Totalconn = (NRS * NRS-1)/2 + NDS
Where Totalconn is total number of replication connections, NRS is the number of replication
servers, and NDS is the number of stand-alone directory servers.</p>
<h3 id="memcached">Memcached</h3>
<ul>
<li>In order to decrease database loads and network requests, following
technologies must be used to connect memcached.</li>
</ul>
<p>a) IDP Memcached Storage Service (Created and last modified
by <em>haimm@idp.protectnetwork.org</em> on May 17, 2013) for IDP</p>
<p>b) Native SP Storage Service (Created by Scott Cantor, last modified
by Lukas Haemmerle on Mar 06, 2014)</p>
<h3 id="twemproxy">Twemproxy</h3>
<ul>
<li>To share the keys stored in memcached between clustered nodes and to
avoid using sticky session sharing mechanism, “TwemProxy” proxy server
must be used. The information sharing between memcached inside of nodes
will be distributed using consistent hashing algorithm. (TwemProxy is a
fast, light-weight proxy for the memcached protocol. Twemproxy was
primarily developed to reduce open connections to Twitter cache servers.).
TwemProxy logical connection topology for “SINGLE GROUP” is presented in <a href="../../../img/cluster/twemproxy.png">Figure 2</a>.</li>
</ul>
<p><img alt="Image" src="../../../img/cluster/twemproxy.png" />
Figure 3</p>
<p>TwemProxy detailed connection topology between two nodes for “SINGLE GROUP” is presented in is presented in Figure 4</p>
<p><img alt="Image" src="../../../img/cluster/twemproxy2.png" />
Figure 4</p>
<h3 id="glusterfs">GlusterFS</h3>
<ul>
<li>To share configuration or static files between nodes must be used GlusterFS
technology. GlusterFS logical connection topology for “SINGLE GROUP” is
presented in <a href="../../../img/cluster/glusterfs.png">Figure 5</a>.</li>
</ul>
<p><img alt="Image" src="../../../img/cluster/glusterfs.png" />
Figure 5</p>
<ul>
<li>GlusterFS detailed connection topology between two nodes for “SINGLE
GROUP” is presented in <a href="../../../img/cluster/glusterfs.png">Figure 6</a>. The files and directories inside of
GlusterFS mount point can be mounted to the appropriate place in local
node with bind option in mount utility.</li>
</ul>
<p><img alt="Image" src="../../../img/cluster/glusterfs2.png" />
Figure 6</p>
<h3 id="health-check-script">Health Check Script</h3>
<ul>
<li>Heath check script must check health status of</li>
</ul>
<p>1) System components. According checking algorithm appropriate
service can be stopped or isolated from cluster, using firewall
rules inside of Nodes. (Checking algorithm must be provided in
other document)</p>
<p>2) Integrity checking of files inside of mount point of GlusterFS.
Collecting centralized integrity checking information can help to
monitor and determine the failure of GlusterFS inside of node.</p>
<p>3) The status of component which is responsible for restarting a
service in current node. (Can be implemented in LDAP or in status
file inside of GlusterFS)</p>
</div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Copyright &copy; 2014, Gluu, Inc.</p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../..//js/bootstrap-3.0.3.min.js"></script>
        <script src="../../..//js/prettify-1.0.min.js"></script>
        <script src="../../..//js/base.js"></script>
        
    </body>
</html>