<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon_ic.ico">

        <title>User Management - Gluu Docs</title>

        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="../.."><img src="../../img/logo.png" ></a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    
                        <li >
                            <a href="../..">Home</a>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown active">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Admin Guide <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
                                    <li >
                                        <a href="../introduction/">Introduction</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../deployment/">Deployment</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../configuration/">Configuration</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../design-customizations/">Design and Customizations</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../ldap/">LDAP</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../saml/">SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../openid-connect/">OpenID Connect</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../uma/">UMA</a>
                                    </li>
                                
                            
                                
                                    <li class="active">
                                        <a href="./">User Management</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../personal/">Personal</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../faq/">FAQ</a>
                                    </li>
                                
                            
                            </ul>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
                                    <li >
                                        <a href="../../reference/api/">API</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../reference/interception-scripts/">Interception Scripts</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../reference/ldap-namespace/">LDAP Namespace</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../reference/ldap-schema/">LDAP Schema</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../reference/lib/">Gluu Library</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../reference/oxAuth/">oxAuth</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../reference/oxd/">OxD</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../reference/oxTrust/">oxTrust</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../certificates/">Certificates</a>
                                    </li>
                                
                            
                            </ul>
                        </li>
                    
                
                
                
                    
                        <li class="dropdown">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">Articles <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                            
                                
                                    <li >
                                        <a href="../../articles/apache-saml/">Apache-SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/benchmarking/">Benchmarking</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/custom-attributes/">Custom Attributes</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/google-saml/">Google SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/iis-saml/">IIS SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/java-connect/">Java Connect</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/java-saml/">Java SAML</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/js-connect/">JS Connect</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/scim-client/">SCIM Client</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/test-shib2/">Test Shib2</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../../articles/gluu-server-ce/">Gluu Server CE</a>
                                    </li>
                                
                            
                                
                                    <li >
                                        <a href="../operations/">Gluu Server Operations</a>
                                    </li>
                                
                            
                            </ul>
                        </li>
                    
                
                
                
                
                </ul>
            

            
            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li >
                    <a rel="next" href="../uma/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../personal/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                
                <li>
                    <a href="https://github.com/GluuFederation/docs">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                <li>
                <!--<form action="." method="get" class="form-inline">-->
                    <!--<div class="search-box">-->
                        <!--<input type="text" value="" class="search-text" placeholder="Search" />-->
                        <!--<input type="submit" value="Search" class="search-tag"/>-->
                    <!--</div>-->
                <!--</form>-->

                </li>
                
            </ul>
            
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3">
                <div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
       
        <li class="main active"><a href="#user-management">User Management</a></li>
        
       
    
       
        <li class="main "><a href="#cache-refresh">Cache Refresh</a></li>
        
       
    
       
        <li class="main "><a href="#self-registration">Self Registration</a></li>
        
       
    
       
        <li class="main "><a href="#local-user-management">Local User Management</a></li>
        
            <li><a href="#people">People</a></li>
        
            <li><a href="#groups">Groups</a></li>
        
            <li><a href="#attributes">Attributes</a></li>
        
       
    
       
        <li class="main "><a href="#scim-oxauth-authentication">SCIM oxAuth Authentication</a></li>
        
            <li><a href="#base-configuration-create-oxauth-client">Base Configuration: Create oxAuth Client</a></li>
        
            <li><a href="#configuration-resource-server">Configuration (Resource Server)</a></li>
        
            <li><a href="#scim-client-requesting-party-sample-code">SCIM Client (Requesting Party) Sample Code</a></li>
        
       
    
       
        <li class="main "><a href="#scim-uma-authentication">SCIM UMA Authentication</a></li>
        
            <li><a href="#base-configuration-create-oxauth-clients-policies">Base Configuration: Create oxAuth Clients, Policies</a></li>
        
            <li><a href="#oxtrust-configuration-resource-server">oxTrust configuration (Resource Server)</a></li>
        
            <li><a href="#scim-client-requesting-party-sample-code_1">SCIM Client (Requesting Party) sample code</a></li>
        
       
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<p><strong>Table of Contents</strong> </p>
<ul>
<li><a href="#user-management">User Management</a></li>
<li><a href="#cache-refresh">Cache Refresh</a></li>
<li><a href="#self-registration">Self Registration</a></li>
<li><a href="#local-user-management">Local User Management</a><ul>
<li><a href="#people">People</a></li>
<li><a href="#groups">Groups</a></li>
<li><a href="#attributes">Attributes</a></li>
</ul>
</li>
<li><a href="#scim-oxauth-authentication">SCIM oxAuth Authentication</a><ul>
<li><a href="#base-configuration-create-oxauth-client">Base configuration: create oxAuth client</a></li>
<li><a href="#configuration-resource-server">configuration (Resource Server)</a></li>
<li><a href="#scim-client-requesting-party-sample-code">SCIM Client (Requesting Party) sample code</a></li>
</ul>
</li>
<li><a href="#scim-uma-authentication">SCIM UMA Authentication</a><ul>
<li><a href="#base-configuration-create-oxauth-clients-policies">Base configuration: Create oxAuth Clients, Policies</a></li>
<li><a href="#oxtrust-configuration-resource-server">oxTrust configuration (Resource Server)</a></li>
<li><a href="#scim-client-requesting-party-sample-code">SCIM Client (Requesting Party) sample code</a></li>
</ul>
</li>
</ul>
<h1 id="user-management">User Management</h1>
<p>To keep the Gluu Server up-to-date with the latest user claims, your organization can either "push" or "pull" identity data. In the "pull" mode, otherwise known as LDAP Syncronization or Cache Refresh, the Gluu Server can use an existing LDAP identity source like Microsoft Active Directory as the authoritative source of identity information. If you "push" identities to the Gluu Server, you can use the JSON/REST SCIM API. Local user management can also be performed inside oxTrust. Each method is detailed below. </p>
<h1 id="cache-refresh">Cache Refresh</h1>
<p>Cache refresh is documented in our <a href="../configuration/#cache-refresh">configuration section</a>.</p>
<h1 id="self-registration">Self Registration</h1>
<p>Self-Registration is done by users on a self-service basis. Since oxTrust user registration cannot add users to a backend LDAP or Active Directory server, self-registration will only be effective if GluuLDAP is used for authentication of users.</p>
<p>BY default a a limited number of attribute is present in default self-registration form. If more attributes are needed they can be added in Registration Management of Organization Configuration. Learn more about Registration Management <a href="../configuration/#registration-management">here</a>.</p>
<h1 id="local-user-management">Local User Management</h1>
<p>In oxTrust, you can add, edit and manage people, groups and user attributes and claims to ensure the proper information is released about the right people. </p>
<h2 id="people">People</h2>
<p>To manage people, navigate to User &gt; Manage People, as shown in the screenshot below. </p>
<p><img alt="" src="http://www.gluu.org/docs/img/local_user_admin/manage_people.png" /></p>
<p>From this interface you can add users and search for specific users. Because the user database can potentially be very large, a value is required in the search field. In other words, you can not click search with a blank entry to populate all users. If you need to see all users, this would be best performed manually within the Gluu OpenDJ server.<br />
Upon performing a user search, a list will be populated with all users that match the search, as shown in the screenshot below. </p>
<p><img alt="Search Users" src="https://cloud.githubusercontent.com/assets/5271048/7096390/2711fa62-df95-11e4-8f5c-a7df045aec93.png" /></p>
<p>To edit a user, simply click on any of the hyperlinks associated with that user and you will be taken to a user management interface where you can modify that specific attributes relating to that user as displayed below. </p>
<p><img alt="Manage Users" src="https://cloud.githubusercontent.com/assets/5271048/7096380/2592c978-df95-11e4-94ff-11b14d39dc91.png" /></p>
<h3 id="import-people">Import People</h3>
<p>This feature allows the Gluu Server Administrator to bulk import users. The user <em>xls</em> file can be added using the <strong>Add</strong> button.</p>
<p><img alt="Import User" src="https://raw.githubusercontent.com/GluuFederation/docs/master/sources/img/oxTrust/admin_config_people.png" /></p>
<p>Validation checking for the added <em>xls</em> file can be done using the <strong>Validate</strong> button. If the file is not formatted properly, the server will reject the same with an error as shown below in the screenshot.</p>
<p><img alt="Validation Error Message" src="https://raw.githubusercontent.com/GluuFederation/docs/master/sources/img/oxTrust/admin_config_people_validation.png" /></p>
<h2 id="groups">Groups</h2>
<p>Out of the box, the Gluu Server includes one group: Gluu Server manager group, named: “gluuManager”. Groups can be added and populated as needed. By using the <em>Manage Groups</em> feature, the Gluu Server Administrator can add, delete or modify any group or user within a group. The list of available groups can be viewed by hitting the <em>Search</em> button with a blank search box.
<img alt="Manage User Groups" src="https://raw.githubusercontent.com/GluuFederation/docs/master/sources/img/oxTrust/admin_users_managegroups.png" /></p>
<p>The Gluu Server Administrator can modify information such as Diplay Name, Group Owner, Visibility type etc. The Server Administrator can also add or delete users within existing groups. The group information is represented as shown below.
<img alt="View group information" src="https://raw.githubusercontent.com/GluuFederation/docs/master/sources/img/oxTrust/admin_users_groupinfo.png" /></p>
<p>If any member of the Organization is required to be added in any specific group, this can be achieved be clicking on the Add Member button. The flow is <em>Add Member --&gt; Search the name/email of the user --&gt; Select the user --&gt; Click OK --&gt; Update.</em>
<img alt="Add Member" src="https://raw.githubusercontent.com/GluuFederation/docs/master/sources/img/oxTrust/admin_users_addmember.png" /></p>
<h2 id="attributes">Attributes</h2>
<p>An “Active” attribute list can be seen from the Configuration &gt; Attributes section. By default, only active attributes are shown. To see inactive attributes, click the "Show All Attributes" link above the table. To edit an attribute simply click on the Display Name. Learn more about Attributes management <a href="../configuration/#attributes">here</a></p>
<h1 id="scim-oxauth-authentication">SCIM oxAuth Authentication</h1>
<p>This is a step by step guide to configure oxTrust and SCIM client for oxAuth authentication. </p>
<h2 id="base-configuration-create-oxauth-client">Base Configuration: Create oxAuth Client</h2>
<p>In order to access SCIM endpoints, an oxAuth client should be registered with scopes "openid" and "user_name".
Authentication method (or LDAP Property “oxAuthTokenEndpointAuthMethod”) of this client should have value “client_secret_basic”.</p>
<p>A new client can be created through various methods: <a href="http://ox.gluu.org/doku.php?id=oxauth:clientregistration">Client Registration</a>, using <a href="http://ox.gluu.org/doku.php?id=oxtrust:home">oxTrust</a> GUI, or manually adding an entry to LDAP. </p>
<p>Sample result entry:</p>
<pre class="prettyprint well"><code>    dn: inum=@!1111!0008!F781.80AF,ou=clients,o=@!1111,o=gluu
    objectClass: oxAuthClient
    objectClass: top
    displayName: SCIM
    inum: @!1111!0008!F781.80AF
    oxAuthAppType: web
    oxAuthClientSecret: eUXIbkBHgIM=
    oxAuthIdTokenSignedResponseAlg: HS256
    oxAuthScope: inum=@!1111!0009!E4B4,ou=scopes,o=@!1111,o=gluu
    oxAuthScope: inum=@!1111!0009!E4B5,ou=scopes,o=@!1111,o=gluu
    oxAuthTokenEndpointAuthMethod: client_secret_basic
</code></pre>
<h2 id="configuration-resource-server">Configuration (Resource Server)</h2>
<p>It's possible to enable/disable SCIM endpoints in oxTrust under "Organization Configuration" page.</p>
<h2 id="scim-client-requesting-party-sample-code">SCIM Client (Requesting Party) Sample Code</h2>
<p>This is a sample SCIM Client code which requests user information from server.</p>
<pre class="prettyprint well"><code>package gluu.scim.client.dev.local;

import gluu.scim.client.ScimClient;
import gluu.scim.client.ScimResponse;

import javax.ws.rs.core.MediaType;

public class TestScimClient {
    public static void main(String[] args) {
        final ScimClient scimClient = ScimClient.oAuthInstance("admin", "secret", "@!9BCF.396B.14EB.1974!0001!CA0D.1918!0008!2F06.F0DF", "secret",
                "https://centos65.gluu.info/identity/seam/resource/restv1", "https://centos65.gluu.info/oxauth/seam/resource/restv1/oxauth/token");
        try {
            ScimResponse response1 = scimClient.retrievePerson("@!9BCF.396B.14EB.1974!0001!CA0D.1918!0000!A8F2.DE1E.D7FB", MediaType.APPLICATION_JSON);
            System.out.println(response1.getResponseBodyString());
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

}
</code></pre>
<p>Values in this example are correspond to client entry fields from  first section.</p>
<h1 id="scim-uma-authentication">SCIM UMA Authentication</h1>
<p>This is step by step guide to configure UMA for oxTrust and SCIM client. High level architecture overview is available in the following article <a href="http://ox.gluu.org/doku.php?id=oxtrust:scim:uma_authentication#ox_scim_architecture_overview">OX SCIM Architecture Overview</a></p>
<h2 id="base-configuration-create-oxauth-clients-policies">Base Configuration: Create oxAuth Clients, Policies</h2>
<ol>
<li>
<p>Check if there are next oxAuth scopes <a href="http://docs.kantarainitiative.org/uma/scopes/prot.json">“http://docs.kantarainitiative.org/uma/scopes/prot.json”</a> and <a href="http://docs.kantarainitiative.org/uma/scopes/authz.json">“http://docs.kantarainitiative.org/uma/scopes/authz.json”</a>. Add these scopes if needed.</p>
</li>
<li>
<p>Register oxAuth client with scope <a href="http://docs.kantarainitiative.org/uma/scopes/prot.json">“http://docs.kantarainitiative.org/uma/scopes/prot.json”</a>. Property “oxAuthTokenEndpointAuthMethod” of this client should has value “client_secret_basic”. It's possible to do that using few methods: <a href="http://ox.gluu.org/doku.php?id=oxauth:clientregistration">Client Registration</a>, using <a href="http://ox.gluu.org/doku.php?id=oxtrust:home">oxTrust</a> GUI, manually add entry to LDAP. oxTrust will use this oxAuth client to obtain PAT. Sample result entry:</p>
<pre class="prettyprint well"><code>dn: inum=@!1111!0008!F781.80AF,ou=clients,o=@!1111,o=gluu
objectClass: oxAuthClient
objectClass: top
displayName: Resource Server Client
inum: @!1111!0008!F781.80AF
oxAuthAppType: web
oxAuthClientSecret: eUXIbkBHgIM=
oxAuthIdTokenSignedResponseAlg: HS256
oxAuthScope: inum=@!1111!0009!6D96,ou=scopes,o=@!1111,o=gluu
oxAuthTokenEndpointAuthMethod: client_secret_basic
</code></pre>
</li>
<li>
<p>Register oxAuth client with scope <a href="http://docs.kantarainitiative.org/uma/scopes/authz.json">“http://docs.kantarainitiative.org/uma/scopes/authz.json”</a>. Property “oxAuthTokenEndpointAuthMethod” of this client should has value “client_secret_basic”. It's possible to do that using few methods: <a href="http://ox.gluu.org/doku.php?id=oxauth:clientregistration">Client Registration</a>, using <a href="http://ox.gluu.org/doku.php?id=oxtrust:home">oxTrust</a> GUI, manually add entry to LDAP. SCIM Client will use this oxAuth client to obtain AAT. Sample result entry:</p>
<pre class="prettyprint well"><code>dn: inum=@!1111!0008!FDC0.0FF5,ou=clients,o=@!1111,o=gluu
objectClass: oxAuthClient
objectClass: top
displayName: Requesting Party Client
inum: @!1111!0008!FDC0.0FF5
oxAuthAppType: web
oxAuthClientSecret: eUXIbkBHgIM=
oxAuthIdTokenSignedResponseAlg: HS256
oxAuthScope: inum=@!1111!0009!6D97,ou=scopes,o=@!1111,o=gluu
oxAuthTokenEndpointAuthMethod: client_secret_basic
</code></pre>
</li>
<li>
<p>Create UMA policy. These are list of steps which allows to add new policy.</p>
</li>
<li>Log with administrative privileges into oxTrust.</li>
<li>Open menu “Configuration→Manage Custom Scripts”.</li>
<li>Select “UMA Authorization Policies” tab and click “Add custom script configuration”.</li>
<li>Select language “Python”.</li>
<li>
<p>Paste this base policy script:</p>
<pre class="prettyprint well"><code>    from org.xdi.model.custom.script.type.uma import AuthorizationPolicyType
    from org.xdi.util import StringHelper, ArrayHelper
    from java.util import Arrays, ArrayList
    from org.xdi.oxauth.service.uma.authorization import AuthorizationContext

    import java

    class AuthorizationPolicy(AuthorizationPolicyType):
        def __init__(self, currentTimeMillis):
            self.currentTimeMillis = currentTimeMillis

    def init(self, configurationAttributes):
        print "UMA authorization policy. Initialization"
        print "UMA authorization policy. Initialized successfully"

        return True

    def destroy(self, configurationAttributes):
        print "UMA authorization policy. Destroy"
        print "UMA authorization policy. Destroyed successfully"
        return True

    def getApiVersion(self):
        return 1

    # Authorizae access to resource
    #   authorizationContext is org.xdi.oxauth.service.uma.authorization.AuthorizationContext
    #   configurationAttributes is java.util.Map&lt;String, SimpleCustomProperty&gt;
    def authorize(self, authorizationContext, configurationAttributes):
        print "UMA Authorization policy. Attempting to authorize client"
        client_id = authorizationContext.getGrant().getClientId()
        user_id = authorizationContext.getGrant().getUserId()

        print "UMA Authorization policy. Client: ", client_id
        print "UMA Authorization policy. User: ", user_id
        if (StringHelper.equalsIgnoreCase("@!1111!0008!FDC0.0FF5", client_id)):
            print "UMA Authorization policy. Authorizing client"
            return True
        else:
            print "UMA Authorization policy. Client isn't authorized"
            return False

        print "UMA Authorization policy. Authorizing client"
        return True
</code></pre>
<ul>
<li>Replace in script above client inum "@!1111!0008!FDC0.0FF5" with client inum which were added in step 3</li>
<li>Click "Enabled" check box</li>
<li>Click "Update" button</li>
</ul>
</li>
</ol>
<p>Note: There is sample UMA Authorization Policy in CE. You can modify it instead of adding new one.</p>
<ol>
<li>Add UMA scope. These are list of steps which allows to add new scope.</li>
<li>Log with administrative privileges into oxTrust.</li>
<li>Open menu “OAuth2→UMA”.</li>
<li>Select “Scopes” tab and click “Add Scope Description”.</li>
<li>Select “Internal” type.</li>
<li>Fill the form.</li>
<li>Select policy which we aded in previous step.</li>
<li>
<p>Click “Add” button. Sample result entry:</p>
<pre class="prettyprint well"><code>    dn: inum=@!1111!D386.9FB1,ou=scopes,ou=uma,o=@!1111,o=gluu
    objectClass: oxAuthUmaScopeDescription
    objectClass: top
    displayName: Access SCIM
    inum: @!1111!D386.9FB1
    owner: inum=@!1111!0000!D9D9,ou=people,o=@!1111,o=gluu
    oxPolicyScriptDn: inum=@!1111!CA0D.1918!2DAF.F995,ou=scripts,o=@!1111,o=gluu
    oxId: access_scim
    oxRevision: 1
    oxType: internal
</code></pre>
</li>
<li>
<p>Register UMA resource set. It's possible to do that via Rest API or via oxTrust GUI. Sample code: [https://github.com/GluuFederation/oxAuth/blob/master/Client/src/test/java/org/xdi/oxauth/ws/rs/uma/RegisterResourceSetFlowHttpTest.java) These are list of steps which allows to add new resource set.</p>
</li>
<li>Log with administrative privileges into oxTrust.</li>
<li>Open menu “OAuth2→UMA”.</li>
<li>Select “Resources” tab and click “Add Resource Set”.</li>
<li>Fill the form.</li>
<li>Add UMA Scope which we created in previous steps.</li>
<li>Add Client which we created in second step.</li>
<li>
<p>Click “Add” button. Sample result entry:</p>
<pre class="prettyprint well"><code>        dn: inum=@!1111!C264.D316,ou=resource_sets,ou=uma,o=@!1111,o=gluu
        objectClass: oxAuthUmaResourceSet
        objectClass: top
        displayName: SCIM Resource Set
        inum: @!1111!C264.D316
        owner: inum=@!1111!0000!D9D9,ou=people,o=@!1111,o=gluu
        oxAuthUmaScope: inum=@!1111!D386.9FB1,ou=scopes,ou=uma,o=@!1111,o=gluu
        oxFaviconImage: http://example.org/scim_resource_set.jpg
        oxId: 1403179695657
        oxRevision: 1
</code></pre>
</li>
</ol>
<h2 id="oxtrust-configuration-resource-server">oxTrust configuration (Resource Server)</h2>
<p>Add next oxTrust UMA related configuration properties to oxTrust.properties:</p>
<pre class="prettyprint well"><code># UMA SCIM protection
uma.issuer=https://centos65.gluu.info
uma.client_id=@!1111!0008!F781.80AF
uma.client_password=&lt;encrypted_password&gt;
uma.resource_id=1403179695657
uma.scope=https://centos65.gluu.info/oxauth/seam/resource/restv1/uma/scopes/access_scim
</code></pre>
<p>Values of these properties correspond to entries from first section.</p>
<p>Note: In order to recreate oxTrust configuration in LDAP you should remove oxTrust configuration entry from LDAP and restart tomcat.
Example DN of oxTrust configuration entry: ou=oxtrust,ou=configuration,inum=@!1111!0002!4907,ou=appliances,o=gluu</p>
<h2 id="scim-client-requesting-party-sample-code_1">SCIM Client (Requesting Party) sample code</h2>
<p>This is sample SCIM Client code which request user information from server.</p>
<pre class="prettyprint well"><code>package gluu.scim.client.dev.local;

import gluu.scim.client.ScimClient;
import gluu.scim.client.ScimResponse;

import javax.ws.rs.core.MediaType;

public class TestScimClient {
    public static void main(String[] args) {
        final ScimClient scimClient = ScimClient.umaInstance("https://centos65.gluu.info/identity/seam/resource/restv1", "https://centos65.gluu.info/.well-known/uma-configuration",
                "@!1111!0008!FDC0.0FF5", "secret");

        try {
            ScimResponse response1 = scimClient.retrievePerson("@!1111!0008!FDC0.0FF5", MediaType.APPLICATION_JSON);
            System.out.println(response1.getResponseBodyString());
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

}
</code></pre>
<p>Values from these example correspond to entries from first section.</p>
</div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Copyright &copy; 2014, Gluu, Inc.</p>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>
        <script src="../../js/base.js"></script>
        
    </body>
</html>