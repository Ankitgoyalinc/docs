<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>User Management - Gluu Docs</title>
  

  <link rel="shortcut icon" href="../../img/gluu_favicon.ico">
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">

  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script>
  <script src="../../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Gluu Docs</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
			
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../..">Home</a>
        
    </li>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>Admin Guide</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../introduction/">Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../getting-started/">Getting Started</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../deployment/">Deployment</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../certificates/">Certificates</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../configuration/">Configuration</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../design-customizations/">Design and Customizations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../ldap/">LDAP</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../saml/">SAML</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../openid-connect/">OpenID Connect</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../uma/">UMA</a>
        
    </li>

        
            
    <li class="toctree-l1 current">
        <a class="current" href="./">User Management</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#user-management">User Management</a></li>
                
            
                <li class="toctree-l3"><a href="#cache-refresh">Cache Refresh</a></li>
                
            
                <li class="toctree-l3"><a href="#self-registration">Self Registration</a></li>
                
            
                <li class="toctree-l3"><a href="#local-user-management">Local User Management</a></li>
                
                    <li><a class="toctree-l4" href="#people">People</a></li>
                
                    <li><a class="toctree-l4" href="#groups">Groups</a></li>
                
                    <li><a class="toctree-l4" href="#attributes">Attributes</a></li>
                
            
                <li class="toctree-l3"><a href="#scim-oxauth-authentication">SCIM oxAuth Authentication</a></li>
                
                    <li><a class="toctree-l4" href="#base-configuration-create-oxauth-client">Base Configuration: Create oxAuth Client</a></li>
                
                    <li><a class="toctree-l4" href="#configuration-resource-server">Configuration (Resource Server)</a></li>
                
                    <li><a class="toctree-l4" href="#scim-client-requesting-party-sample-code">SCIM Client (Requesting Party) Sample Code</a></li>
                
            
                <li class="toctree-l3"><a href="#scim-uma-authentication">SCIM UMA Authentication</a></li>
                
                    <li><a class="toctree-l4" href="#base-configuration-create-oxauth-clients-policies">Base Configuration: Create oxAuth Clients, Policies</a></li>
                
                    <li><a class="toctree-l4" href="#oxtrust-configuration-resource-server">oxTrust configuration (Resource Server)</a></li>
                
                    <li><a class="toctree-l4" href="#scim-client-requesting-party-sample-code_1">SCIM Client (Requesting Party) sample code</a></li>
                
            
            </ul>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../personal/">Personal</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../faq/">FAQ</a>
        
    </li>

        
    </ul>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>Reference</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/api/">API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/interception-scripts/">Interception Scripts</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/ldap-namespace/">LDAP Namespace</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/ldap-schema/">LDAP Schema</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/lib/">Gluu Library</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/oxAuth/">OxAuth</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/oxd/">OxD</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/oxTrust/">OxTrust</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../reference/mod_auth_oidc/">Apache Module</a>
        
    </li>

        
    </ul>
<li>
		
          
			
            <li>
    <ul class="subnav">
    <li><span>Articles</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/cache-refresh/">Cache Refresh Introduction</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/apache-saml/">Apache SAML SP Config</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/google-saml/">SAML SSO with Google</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/salesforce-sso/">SAML SSO with Salesforce</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/hobsons-saml/">SAML SSO with Hobsons</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/iis-saml/">IIS SAML Config</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/benchmarking/">Benchmarking</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/custom-attributes/">Custom Attributes</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/gluu-server-ce/">Gluu CE</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/operations/">Gluu CE Operations</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/java-connect/">OpenID in Java</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/js-connect/">OpenID from JavaScript</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/java-saml/">Java SAML Library</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/scim-client/">SCIM API</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/mod-auth-oidc/">mod_auth_oidc Installation Guide</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/test-shib2/">Testing Shib2</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../../articles/social-login-google/">Social Login with Google</a>
        
    </li>

        
    </ul>
<li>
		
          
		
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Gluu Docs</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Admin Guide &raquo;</li>
        
      
    
    <li>User Management</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/GluuFederation/docs" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><strong>Table of Contents</strong> </p>
<ul>
<li><a href="#user-management">User Management</a></li>
<li><a href="#cache-refresh">Cache Refresh</a></li>
<li><a href="#self-registration">Self Registration</a></li>
<li><a href="#local-user-management">Local User Management</a><ul>
<li><a href="#people">People</a></li>
<li><a href="#groups">Groups</a></li>
<li><a href="#attributes">Attributes</a></li>
</ul>
</li>
<li><a href="#scim-oxauth-authentication">SCIM oxAuth Authentication</a><ul>
<li><a href="#base-configuration-create-oxauth-client">Base configuration: create oxAuth client</a></li>
<li><a href="#configuration-resource-server">configuration (Resource Server)</a></li>
<li><a href="#scim-client-requesting-party-sample-code">SCIM Client (Requesting Party) sample code</a></li>
</ul>
</li>
<li><a href="#scim-uma-authentication">SCIM UMA Authentication</a><ul>
<li><a href="#base-configuration-create-oxauth-clients-policies">Base configuration: Create oxAuth Clients, Policies</a></li>
<li><a href="#oxtrust-configuration-resource-server">oxTrust configuration (Resource Server)</a></li>
<li><a href="#scim-client-requesting-party-sample-code">SCIM Client (Requesting Party) sample code</a></li>
</ul>
</li>
</ul>
<h1 id="user-management">User Management</h1>
<p>To keep the Gluu Server up-to-date with the latest user claims, your organization can either "push" or "pull" identity data. In the "pull" mode, otherwise known as LDAP Syncronization or Cache Refresh, the Gluu Server can use an existing LDAP identity source like Microsoft Active Directory as the authoritative source of identity information. If you "push" identities to the Gluu Server, you can use the JSON/REST SCIM API. Local user management can also be performed inside oxTrust. Each method is detailed below. </p>
<h1 id="cache-refresh">Cache Refresh</h1>
<p>Cache Refresh was built by Gluu to pull user information from a backend Active Directory/LDAP Server. Cache refresh dynamically synchronises user information from the backend data source to a local LDAP server in order to maximize performance. Cache refresh is documented in our <a href="../configuration/#cache-refresh">configuration section</a>.</p>
<h1 id="self-registration">Self Registration</h1>
<p>Self-Registration is done by users on a self-service basis. Since oxTrust user registration cannot add users to a backend LDAP or Active Directory server, self-registration will only be effective if GluuLDAP is used for authentication of users.</p>
<p>BY default a a limited number of attribute is present in default self-registration form. If more attributes are needed they can be added in Registration Management of Organization Configuration. Learn more about Registration Management <a href="../configuration/#registration-management">here</a>.</p>
<h1 id="local-user-management">Local User Management</h1>
<p>In oxTrust, you can add, edit and manage people, groups and user attributes and claims to ensure the proper information is released about the right people. </p>
<h2 id="people">People</h2>
<p>To manage people, navigate to User &gt; Manage People, as shown in the screenshot below. </p>
<p><img alt="" src="http://www.gluu.org/docs/img/local_user_admin/manage_people.png" /></p>
<p>From this interface you can add users and search for specific users. Because the user database can potentially be very large, a value is required in the search field. In other words, you can not click search with a blank entry to populate all users. If you need to see all users, this would be best performed manually within the Gluu OpenDJ server.<br />
Upon performing a user search, a list will be populated with all users that match the search, as shown in the screenshot below. </p>
<p><img alt="Search Users" src="https://cloud.githubusercontent.com/assets/5271048/7096390/2711fa62-df95-11e4-8f5c-a7df045aec93.png" /></p>
<p>To edit a user, simply click on any of the hyperlinks associated with that user and you will be taken to a user management interface where you can modify that specific attributes relating to that user as displayed below. </p>
<p><img alt="Manage Users" src="https://cloud.githubusercontent.com/assets/5271048/7096380/2592c978-df95-11e4-94ff-11b14d39dc91.png" /></p>
<h3 id="import-people">Import People</h3>
<p>This feature allows the Gluu Server Administrator to bulk import users. The user <em>xls</em> file can be added using the <strong>Add</strong> button.</p>
<p><img alt="Import User" src="https://raw.githubusercontent.com/GluuFederation/docs/master/sources/img/oxTrust/admin_config_people.png" /></p>
<p>Validation checking for the added <em>xls</em> file can be done using the <strong>Validate</strong> button. If the file is not formatted properly, the server will reject the same with an error as shown below in the screenshot.</p>
<p><img alt="Validation Error Message" src="https://raw.githubusercontent.com/GluuFederation/docs/master/sources/img/oxTrust/admin_config_people_validation.png" /></p>
<h2 id="groups">Groups</h2>
<p>Out of the box, the Gluu Server includes one group: Gluu Server manager group, named: “gluuManager”. Groups can be added and populated as needed. By using the <em>Manage Groups</em> feature, the Gluu Server Administrator can add, delete or modify any group or user within a group. The list of available groups can be viewed by hitting the <em>Search</em> button with a blank search box.
<img alt="Manage User Groups" src="https://raw.githubusercontent.com/GluuFederation/docs/master/sources/img/oxTrust/admin_users_managegroups.png" /></p>
<p>The Gluu Server Administrator can modify information such as Diplay Name, Group Owner, Visibility type etc. The Server Administrator can also add or delete users within existing groups. The group information is represented as shown below.
<img alt="View group information" src="https://raw.githubusercontent.com/GluuFederation/docs/master/sources/img/oxTrust/admin_users_groupinfo.png" /></p>
<p>If any member of the Organization is required to be added in any specific group, this can be achieved be clicking on the Add Member button. The flow is <em>Add Member --&gt; Search the name/email of the user --&gt; Select the user --&gt; Click OK --&gt; Update.</em>
<img alt="Add Member" src="https://raw.githubusercontent.com/GluuFederation/docs/master/sources/img/oxTrust/admin_users_addmember.png" /></p>
<h2 id="attributes">Attributes</h2>
<p>An “Active” attribute list can be seen from the Configuration &gt; Attributes section. By default, only active attributes are shown. To see inactive attributes, click the "Show All Attributes" link above the table. To edit an attribute simply click on the Display Name. Learn more about Attributes management <a href="../configuration/#attributes">here</a></p>
<h1 id="scim-oxauth-authentication">SCIM oxAuth Authentication</h1>
<p>This is a step by step guide to configure oxTrust and SCIM client for oxAuth authentication. </p>
<h2 id="base-configuration-create-oxauth-client">Base Configuration: Create oxAuth Client</h2>
<p>In order to access SCIM endpoints, an oxAuth client should be registered with scopes "openid" and "user_name".
Authentication method (or LDAP Property “oxAuthTokenEndpointAuthMethod”) of this client should have value “client_secret_basic”.</p>
<p>A new client can be created through various methods: <a href="http://ox.gluu.org/doku.php?id=oxauth:clientregistration">Client Registration</a>, using <a href="http://ox.gluu.org/doku.php?id=oxtrust:home">oxTrust</a> GUI, or manually adding an entry to LDAP. </p>
<p>Sample result entry:</p>
<pre><code>    dn: inum=@!1111!0008!F781.80AF,ou=clients,o=@!1111,o=gluu
    objectClass: oxAuthClient
    objectClass: top
    displayName: SCIM
    inum: @!1111!0008!F781.80AF
    oxAuthAppType: web
    oxAuthClientSecret: eUXIbkBHgIM=
    oxAuthIdTokenSignedResponseAlg: HS256
    oxAuthScope: inum=@!1111!0009!E4B4,ou=scopes,o=@!1111,o=gluu
    oxAuthScope: inum=@!1111!0009!E4B5,ou=scopes,o=@!1111,o=gluu
    oxAuthTokenEndpointAuthMethod: client_secret_basic
</code></pre>
<h2 id="configuration-resource-server">Configuration (Resource Server)</h2>
<p>It's possible to enable/disable SCIM endpoints in oxTrust under "Organization Configuration" page.</p>
<h2 id="scim-client-requesting-party-sample-code">SCIM Client (Requesting Party) Sample Code</h2>
<p>This is a sample SCIM Client code which requests user information from server.</p>
<pre><code>package gluu.scim.client.dev.local;

import gluu.scim.client.ScimClient;
import gluu.scim.client.ScimResponse;

import javax.ws.rs.core.MediaType;

public class TestScimClient {
    public static void main(String[] args) {
        final ScimClient scimClient = ScimClient.oAuthInstance("admin", "secret", "@!9BCF.396B.14EB.1974!0001!CA0D.1918!0008!2F06.F0DF", "secret",
                "https://centos65.gluu.info/identity/seam/resource/restv1", "https://centos65.gluu.info/oxauth/seam/resource/restv1/oxauth/token");
        try {
            ScimResponse response1 = scimClient.retrievePerson("@!9BCF.396B.14EB.1974!0001!CA0D.1918!0000!A8F2.DE1E.D7FB", MediaType.APPLICATION_JSON);
            System.out.println(response1.getResponseBodyString());
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

}
</code></pre>
<p>Values in this example are correspond to client entry fields from  first section.</p>
<h1 id="scim-uma-authentication">SCIM UMA Authentication</h1>
<p>This is step by step guide to configure UMA for oxTrust and SCIM client. High level architecture overview is available in the following article <a href="http://ox.gluu.org/doku.php?id=oxtrust:scim:uma_authentication#ox_scim_architecture_overview">OX SCIM Architecture Overview</a></p>
<h2 id="base-configuration-create-oxauth-clients-policies">Base Configuration: Create oxAuth Clients, Policies</h2>
<ol>
<li>
<p>Register oxAuth client with scope “uma_protection”. Property “oxAuthTokenEndpointAuthMethod” of this client should has value “client_secret_basic”. It's possible to do that using few methods: <a href="http://ox.gluu.org/doku.php?id=oxauth:clientregistration">Client Registration</a>, using <a href="http://ox.gluu.org/doku.php?id=oxtrust:home">oxTrust</a> GUI, manually add entry to LDAP. oxTrust will use this oxAuth client to obtain PAT. Sample result entry:</p>
<pre><code>dn: inum=@!1111!0008!F781.80AF,ou=clients,o=@!1111,o=gluu
objectClass: oxAuthClient
objectClass: top
displayName: Resource Server Client
inum: @!1111!0008!F781.80AF
oxAuthAppType: web
oxAuthClientSecret: eUXIbkBHgIM=
oxAuthIdTokenSignedResponseAlg: HS256
oxAuthScope: inum=@!1111!0009!6D96,ou=scopes,o=@!1111,o=gluu
oxAuthTokenEndpointAuthMethod: client_secret_basic
</code></pre>
</li>
<li>
<p>Register oxAuth client with scope “uma_authorization”. Property “oxAuthTokenEndpointAuthMethod” of this client should has value “client_secret_basic”. It's possible to do that using few methods: <a href="http://ox.gluu.org/doku.php?id=oxauth:clientregistration">Client Registration</a>, using <a href="http://ox.gluu.org/doku.php?id=oxtrust:home">oxTrust</a> GUI, manually add entry to LDAP. SCIM Client will use this oxAuth client to obtain AAT. Sample result entry:</p>
<pre><code>dn: inum=@!1111!0008!FDC0.0FF5,ou=clients,o=@!1111,o=gluu
objectClass: oxAuthClient
objectClass: top
displayName: Requesting Party Client
inum: @!1111!0008!FDC0.0FF5
oxAuthAppType: web
oxAuthClientSecret: eUXIbkBHgIM=
oxAuthIdTokenSignedResponseAlg: HS256
oxAuthScope: inum=@!1111!0009!6D97,ou=scopes,o=@!1111,o=gluu
oxAuthTokenEndpointAuthMethod: client_secret_basic
</code></pre>
</li>
<li>
<p>Create UMA policy. These are list of steps which allows to add new policy.</p>
</li>
<li>Log with administrative privileges into oxTrust.</li>
<li>Open menu “Configuration→Manage Custom Scripts”.</li>
<li>Select “UMA Authorization Policies” tab and click “Add custom script configuration”.</li>
<li>Select language “Python”.</li>
<li>Paste this base policy script:<pre><code>    from org.xdi.model.custom.script.type.uma import AuthorizationPolicyType
    from org.xdi.util import StringHelper, ArrayHelper
    from java.util import Arrays, ArrayList
    from org.xdi.oxauth.service.uma.authorization import AuthorizationContext

    import java

    class AuthorizationPolicy(AuthorizationPolicyType):
        def __init__(self, currentTimeMillis):
            self.currentTimeMillis = currentTimeMillis

    def init(self, configurationAttributes):
        print "UMA authorization policy. Initialization"
        print "UMA authorization policy. Initialized successfully"

        return True

    def destroy(self, configurationAttributes):
        print "UMA authorization policy. Destroy"
        print "UMA authorization policy. Destroyed successfully"
        return True

    def getApiVersion(self):
        return 1

    # Authorizae access to resource
    #   authorizationContext is org.xdi.oxauth.service.uma.authorization.AuthorizationContext
    #   configurationAttributes is java.util.Map&lt;String, SimpleCustomProperty&gt;
    def authorize(self, authorizationContext, configurationAttributes):
        print "UMA Authorization policy. Attempting to authorize client"
        client_id = authorizationContext.getGrant().getClientId()
        user_id = authorizationContext.getGrant().getUserId()

        print "UMA Authorization policy. Client: ", client_id
        print "UMA Authorization policy. User: ", user_id
        if (StringHelper.equalsIgnoreCase("@!1111!0008!FDC0.0FF5", client_id)):
            print "UMA Authorization policy. Authorizing client"
            return True
        else:
            print "UMA Authorization policy. Client isn't authorized"
            return False

        print "UMA Authorization policy. Authorizing client"
        return True
</code></pre>
<ul>
<li>Replace in script above client inum "@!1111!0008!FDC0.0FF5" with client inum which were added in step 3</li>
<li>Click "Enabled" check box</li>
<li>Click "Update" button</li>
</ul>
</li>
</ol>
<p>Note: There is sample UMA Authorization Policy in CE. You can modify it instead of adding new one.</p>
<ol>
<li>Add UMA scope. These are list of steps which allows to add new scope.</li>
<li>Log with administrative privileges into oxTrust.</li>
<li>Open menu “OAuth2→UMA”.</li>
<li>Select “Scopes” tab and click “Add Scope Description”.</li>
<li>Select “Internal” type.</li>
<li>Fill the form.</li>
<li>Select policy which we aded in previous step.</li>
<li>
<p>Click “Add” button. Sample result entry:</p>
<pre><code>    dn: inum=@!1111!D386.9FB1,ou=scopes,ou=uma,o=@!1111,o=gluu
    objectClass: oxAuthUmaScopeDescription
    objectClass: top
    displayName: Access SCIM
    inum: @!1111!D386.9FB1
    owner: inum=@!1111!0000!D9D9,ou=people,o=@!1111,o=gluu
    oxPolicyScriptDn: inum=@!1111!CA0D.1918!2DAF.F995,ou=scripts,o=@!1111,o=gluu
    oxId: access_scim
    oxRevision: 1
    oxType: internal
</code></pre>
</li>
<li>
<p>Register UMA resource set. It's possible to do that via Rest API or via oxTrust GUI. Sample code: [https://github.com/GluuFederation/oxAuth/blob/master/Client/src/test/java/org/xdi/oxauth/ws/rs/uma/RegisterResourceSetFlowHttpTest.java) These are list of steps which allows to add new resource set.</p>
</li>
<li>Log with administrative privileges into oxTrust.</li>
<li>Open menu “OAuth2→UMA”.</li>
<li>Select “Resources” tab and click “Add Resource Set”.</li>
<li>Fill the form.</li>
<li>Add UMA Scope which we created in previous steps.</li>
<li>Add Client which we created in second step.</li>
<li>Click “Add” button. Sample result entry:<pre><code>        dn: inum=@!1111!C264.D316,ou=resource_sets,ou=uma,o=@!1111,o=gluu
        objectClass: oxAuthUmaResourceSet
        objectClass: top
        displayName: SCIM Resource Set
        inum: @!1111!C264.D316
        owner: inum=@!1111!0000!D9D9,ou=people,o=@!1111,o=gluu
        oxAuthUmaScope: inum=@!1111!D386.9FB1,ou=scopes,ou=uma,o=@!1111,o=gluu
        oxFaviconImage: http://example.org/scim_resource_set.jpg
        oxId: 1403179695657
        oxRevision: 1
</code></pre>
</li>
</ol>
<h2 id="oxtrust-configuration-resource-server">oxTrust configuration (Resource Server)</h2>
<p>Add next oxTrust UMA related configuration properties to oxTrust.properties:</p>
<pre><code># UMA SCIM protection
uma.issuer=https://centos65.gluu.info
uma.client_id=@!1111!0008!F781.80AF
uma.client_password=&lt;encrypted_password&gt;
uma.resource_id=1403179695657
uma.scope=https://centos65.gluu.info/oxauth/seam/resource/restv1/uma/scopes/access_scim
</code></pre>
<p>Values of these properties correspond to entries from first section.</p>
<p>Note: In order to recreate oxTrust configuration in LDAP you should remove oxTrust configuration entry from LDAP and restart tomcat.
Example DN of oxTrust configuration entry: ou=oxtrust,ou=configuration,inum=@!1111!0002!4907,ou=appliances,o=gluu</p>
<h2 id="scim-client-requesting-party-sample-code_1">SCIM Client (Requesting Party) sample code</h2>
<p>This is sample SCIM Client code which request user information from server.</p>
<pre><code>package gluu.scim.client.dev.local;

import gluu.scim.client.ScimClient;
import gluu.scim.client.ScimResponse;

import javax.ws.rs.core.MediaType;

public class TestScimClient {
    public static void main(String[] args) {
        final ScimClient scimClient = ScimClient.umaInstance("https://centos65.gluu.info/identity/seam/resource/restv1", "https://centos65.gluu.info/.well-known/uma-configuration",
                "@!1111!0008!FDC0.0FF5", "secret");

        try {
            ScimResponse response1 = scimClient.retrievePerson("@!1111!0008!FDC0.0FF5", MediaType.APPLICATION_JSON);
            System.out.println(response1.getResponseBodyString());
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }

}
</code></pre>
<p>Values from these example correspond to entries from first section.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../personal/" class="btn btn-neutral float-right" title="Personal"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../uma/" class="btn btn-neutral" title="UMA"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    <!-- Copyright etc -->
    </p>
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../uma/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../personal/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
